"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6583],{69664:function(e,t,r){r.d(t,{BU:function(){return tI},CX:function(){return tx},F3:function(){return eC},_7:function(){return M},mH:function(){return tR},ui:function(){return ts},vt:function(){return tn}});var n,a,o=r(39130),i=r.n(o),l=r(22170),s=r.n(l),d=r(48527),c=r.n(d),u=r(2265),f=r(49998),v=r(68540),h=r(54111),p=r(99201),g=r(54887);function m(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t,r){var n;return n=function(e,t){if("object"!==w(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==w(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===w(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=(0,u.createContext)(null),M=()=>{var e=(0,u.useContext)(y);if(!e)throw Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},k=parseInt(u.version.split(".")[0],10),x="undefined"!=typeof navigator&&"undefined"!=typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,E="undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent),O="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent),C="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),L="undefined"!=typeof navigator&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),D="undefined"!=typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),S="undefined"!=typeof navigator&&/Chrome/i.test(navigator.userAgent),P="undefined"!=typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),B=O&&"undefined"!=typeof navigator&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),F="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),R="undefined"!=typeof navigator&&/.*UCBrowser/.test(navigator.userAgent),T="undefined"!=typeof navigator&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),N=!!("undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement);"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&null!==(n=navigator.userAgent.match(/Version\/(\d+)/))&&void 0!==n&&n[1]&&parseInt(null===(a=navigator.userAgent.match(/Version\/(\d+)/))||void 0===a?void 0:a[1],10);var j=(!P||!B)&&!D&&"undefined"!=typeof globalThis&&globalThis.InputEvent&&"function"==typeof globalThis.InputEvent.prototype.getTargetRanges,W=new WeakMap,A=new WeakMap,I=new WeakMap,q=new WeakMap,Y=new WeakMap,$=new WeakMap,_=new WeakMap,U=new WeakMap,z=new WeakMap,V=new WeakMap,H=new WeakMap,K=new WeakMap,X=new WeakMap,J=new WeakMap,Z=new WeakMap,G=new WeakMap,Q=new WeakMap,ee=new WeakMap,et=new WeakMap,er=new WeakMap,en=new WeakMap,ea=Symbol("placeholder"),eo=Symbol("mark-placeholder"),ei=globalThis.Text,el=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,es=e=>ec(e)&&8===e.nodeType,ed=e=>ec(e)&&1===e.nodeType,ec=e=>{var t=el(e);return!!t&&e instanceof t.Node},eu=e=>{var t=e&&e.anchorNode&&el(e.anchorNode);return!!t&&e instanceof t.Selection},ef=e=>ec(e)&&3===e.nodeType,ev=e=>e.clipboardData&&""!==e.clipboardData.getData("text/plain")&&1===e.clipboardData.types.length,eh=e=>{var[t,r]=e;if(ed(t)&&t.childNodes.length){var n=r===t.childNodes.length,a=n?r-1:r;for([t,a]=eg(t,a,n?"backward":"forward"),n=a<r;ed(t)&&t.childNodes.length;){var o=n?t.childNodes.length-1:0;t=em(t,o,n?"backward":"forward")}r=n&&null!=t.textContent?t.textContent.length:0}return[t,r]},ep=e=>{for(var t=e&&e.parentNode;t;){if("[object ShadowRoot]"===t.toString())return!0;t=t.parentNode}return!1},eg=(e,t,r)=>{for(var{childNodes:n}=e,a=n[t],o=t,i=!1,l=!1;(es(a)||ed(a)&&0===a.childNodes.length||ed(a)&&"false"===a.getAttribute("contenteditable"))&&(!i||!l);){if(o>=n.length){i=!0,o=t-1,r="backward";continue}if(o<0){l=!0,o=t+1,r="forward";continue}a=n[o],t=o,o+="forward"===r?1:-1}return[a,t]},em=(e,t,r)=>{var[n]=eg(e,t,r);return n},ew=e=>{var t="";if(ef(e)&&e.nodeValue)return e.nodeValue;if(ed(e)){for(var r of Array.from(e.childNodes))t+=ew(r);var n=getComputedStyle(e).getPropertyValue("display");("block"===n||"list"===n||"BR"===e.tagName)&&(t+="\n")}return t},eb=/data-slate-fragment="(.+?)"/m,ey=e=>{var[,t]=e.getData("text/html").match(eb)||[];return t},eM=e=>null!=e.getSelection?e.getSelection():document.getSelection(),ek=(e,t,r)=>{var{target:n}=t;if(ed(n)&&n.matches('[contentEditable="false"]'))return!1;var{document:a}=eC.getWindow(e);if(a.contains(n))return eC.hasDOMNode(e,n,{editable:!0});var o=r.find(e=>{var{addedNodes:t,removedNodes:r}=e;for(var a of t)if(a===n||a.contains(n))return!0;for(var o of r)if(o===n||o.contains(n))return!0});return!!o&&o!==t&&ek(e,o,r)},ex=()=>{for(var e,t,r,n=document.activeElement;null!==(e=n)&&void 0!==e&&e.shadowRoot&&null!==(t=n.shadowRoot)&&void 0!==t&&t.activeElement;)n=null===(r=n)||void 0===r||null===(r=r.shadowRoot)||void 0===r?void 0:r.activeElement;return n},eE=0;class eO{constructor(){b(this,"id",void 0),this.id="".concat(eE++)}}var eC={androidPendingDiffs:e=>ee.get(e),androidScheduleFlush:e=>{var t;null===(t=Z.get(e))||void 0===t||t()},blur:e=>{var t=eC.toDOMNode(e,e),r=eC.findDocumentOrShadowRoot(e);H.set(e,!1),r.activeElement===t&&t.blur()},deselect:e=>{var{selection:t}=e,r=eM(eC.findDocumentOrShadowRoot(e));r&&r.rangeCount>0&&r.removeAllRanges(),t&&v.YR.deselect(e)},findDocumentOrShadowRoot:e=>{var t=eC.toDOMNode(e,e),r=t.getRootNode();return r instanceof Document||r instanceof ShadowRoot?r:t.ownerDocument},findEventRange:(e,t)=>{"nativeEvent"in t&&(t=t.nativeEvent);var r,{clientX:n,clientY:a,target:o}=t;if(null==n||null==a)throw Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var i=eC.toSlateNode(e,t.target),l=eC.findPath(e,i);if(v.W_.isElement(i)&&v.ML.isVoid(e,i)){var s=o.getBoundingClientRect(),d=e.isInline(i)?n-s.left<s.left+s.width-n:a-s.top<s.top+s.height-a,c=v.ML.point(e,l,{edge:d?"start":"end"}),u=d?v.ML.before(e,c):v.ML.after(e,c);if(u)return v.ML.range(e,u)}var{document:f}=eC.getWindow(e);if(f.caretRangeFromPoint)r=f.caretRangeFromPoint(n,a);else{var h=f.caretPositionFromPoint(n,a);h&&((r=f.createRange()).setStart(h.offsetNode,h.offset),r.setEnd(h.offsetNode,h.offset))}if(!r)throw Error("Cannot resolve a Slate range from a DOM event: ".concat(t));return eC.toSlateRange(e,r,{exactMatch:!1,suppressThrow:!1})},findKey:(e,t)=>{var r=U.get(t);return r||(r=new eO,U.set(t,r)),r},findPath:(e,t)=>{for(var r=[],n=t;;){var a=A.get(n);if(null==a){if(v.ML.isEditor(n))return r;break}var o=W.get(n);if(null==o)break;r.unshift(o),n=a}throw Error("Unable to find the path for Slate node: ".concat(v.o4.stringify(t)))},focus:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{retries:5};if(!H.get(e)){if(t.retries<=0)throw Error("Could not set focus, editor seems stuck with pending operations");if(e.operations.length>0){setTimeout(()=>{eC.focus(e,{retries:t.retries-1})},10);return}var r=eC.toDOMNode(e,e),n=eC.findDocumentOrShadowRoot(e);if(n.activeElement!==r){if(e.selection&&n instanceof Document){var a=eM(n),o=eC.toDOMRange(e,e.selection);null==a||a.removeAllRanges(),null==a||a.addRange(o)}e.selection||v.YR.select(e,v.ML.start(e,[])),H.set(e,!0),r.focus({preventScroll:!0})}}},getWindow:e=>{var t=I.get(e);if(!t)throw Error("Unable to find a host window element for this editor");return t},hasDOMNode:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{editable:a=!1}=n,o=eC.toDOMNode(e,e);try{r=ed(t)?t:t.parentElement}catch(e){if(e instanceof Error&&!e.message.includes('Permission denied to access property "nodeType"'))throw e}return!!r&&r.closest("[data-slate-editor]")===o&&(!a||!!r.isContentEditable||"boolean"==typeof r.isContentEditable&&r.closest('[contenteditable="false"]')===o||!!r.getAttribute("data-slate-zero-width"))},hasEditableTarget:(e,t)=>ec(t)&&eC.hasDOMNode(e,t,{editable:!0}),hasRange:(e,t)=>{var{anchor:r,focus:n}=t;return v.ML.hasPath(e,r.path)&&v.ML.hasPath(e,n.path)},hasSelectableTarget:(e,t)=>eC.hasEditableTarget(e,t)||eC.isTargetInsideNonReadonlyVoid(e,t),hasTarget:(e,t)=>ec(t)&&eC.hasDOMNode(e,t),insertData:(e,t)=>{e.insertData(t)},insertFragmentData:(e,t)=>e.insertFragmentData(t),insertTextData:(e,t)=>e.insertTextData(t),isComposing:e=>!!K.get(e),isFocused:e=>!!H.get(e),isReadOnly:e=>!!V.get(e),isTargetInsideNonReadonlyVoid:(e,t)=>{if(V.get(e))return!1;var r=eC.hasTarget(e,t)&&eC.toSlateNode(e,t);return v.W_.isElement(r)&&v.ML.isVoid(e,r)},setFragmentData:(e,t,r)=>e.setFragmentData(t,r),toDOMNode:(e,t)=>{var r=z.get(e),n=v.ML.isEditor(t)?q.get(e):null==r?void 0:r.get(eC.findKey(e,t));if(!n)throw Error("Cannot resolve a DOM node from Slate node: ".concat(v.o4.stringify(t)));return n},toDOMPoint:(e,t)=>{var[r]=v.ML.node(e,t.path),n=eC.toDOMNode(e,r);v.ML.void(e,{at:t})&&(t={path:t.path,offset:0});for(var a=Array.from(n.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),o=0,i=0;i<a.length;i++){var l=a[i],s=l.childNodes[0];if(null!=s&&null!=s.textContent){var{length:d}=s.textContent,c=l.getAttribute("data-slate-length"),u=o+(null==c?d:parseInt(c,10)),f=a[i+1];if(t.offset===u&&null!=f&&f.hasAttribute("data-slate-mark-placeholder")){var h,p,g=f.childNodes[0];h=[g instanceof ei?g:f,null!==(p=f.textContent)&&void 0!==p&&p.startsWith("\uFEFF")?1:0];break}if(t.offset<=u){h=[s,Math.min(d,Math.max(0,t.offset-o))];break}o=u}}if(!h)throw Error("Cannot resolve a DOM point from Slate point: ".concat(v.o4.stringify(t)));return h},toDOMRange:(e,t)=>{var{anchor:r,focus:n}=t,a=v.e6.isBackward(t),o=eC.toDOMPoint(e,r),i=v.e6.isCollapsed(t)?o:eC.toDOMPoint(e,n),l=eC.getWindow(e).document.createRange(),[s,d]=a?i:o,[c,u]=a?o:i,f=!!(ed(s)?s:s.parentElement).getAttribute("data-slate-zero-width"),h=!!(ed(c)?c:c.parentElement).getAttribute("data-slate-zero-width");return l.setStart(s,f?1:d),l.setEnd(c,h?1:u),l},toSlateNode:(e,t)=>{var r=ed(t)?t:t.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r?$.get(r):null;if(!n)throw Error("Cannot resolve a Slate node from DOM node: ".concat(r));return n},toSlatePoint:(e,t,r)=>{var{exactMatch:n,suppressThrow:a}=r,[o,i]=n?t:eh(t),l=o.parentNode,s=null,d=0;if(l){var c,u,f=eC.toDOMNode(e,e),h=l.closest('[data-slate-void="true"]'),p=h&&f.contains(h)?h:null,g=l.closest("[data-slate-leaf]"),m=null;if(g){if(s=g.closest('[data-slate-node="text"]')){var w=eC.getWindow(e).document.createRange();w.setStart(s,0),w.setEnd(o,i);var b=w.cloneContents();[...Array.prototype.slice.call(b.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(b.querySelectorAll("[contenteditable=false]"))].forEach(e=>{if(O&&!n&&e.hasAttribute("data-slate-zero-width")&&e.textContent.length>0&&"\uFEFF"!==e.textContext){e.textContent.startsWith("\uFEFF")&&(e.textContent=e.textContent.slice(1));return}e.parentNode.removeChild(e)}),d=b.textContent.length,m=s}}else if(p){for(var y=p.querySelectorAll("[data-slate-leaf]"),M=0;M<y.length;M++){var k=y[M];if(eC.hasDOMNode(e,k)){g=k;break}}g?(s=g.closest('[data-slate-node="text"]'),d=(m=g).textContent.length,m.querySelectorAll("[data-slate-zero-width]").forEach(e=>{d-=e.textContent.length})):d=1}m&&d===m.textContent.length&&O&&"z"===m.getAttribute("data-slate-zero-width")&&null!==(c=m.textContent)&&void 0!==c&&c.startsWith("\uFEFF")&&(l.hasAttribute("data-slate-zero-width")||C&&null!==(u=m.textContent)&&void 0!==u&&u.endsWith("\n\n"))&&d--}if(O&&!s&&!n){var x=l.hasAttribute("data-slate-node")?l:l.closest("[data-slate-node]");if(x&&eC.hasDOMNode(e,x,{editable:!0})){var E=eC.toSlateNode(e,x),{path:L,offset:D}=v.ML.start(e,eC.findPath(e,E));return x.querySelector("[data-slate-leaf]")||(D=i),{path:L,offset:D}}}if(!s){if(a)return null;throw Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var S=eC.toSlateNode(e,s);return{path:eC.findPath(e,S),offset:d}},toSlateRange:(e,t,r)=>{var n,a,o,i,l,s,d,{exactMatch:c,suppressThrow:u}=r;if(eu(t)?t.anchorNode:t.startContainer){if(eu(t)){if(C&&t.rangeCount>1){i=t.focusNode;var f=t.getRangeAt(0),h=t.getRangeAt(t.rangeCount-1);if(i instanceof HTMLTableRowElement&&f.startContainer instanceof HTMLTableRowElement&&h.startContainer instanceof HTMLTableRowElement){function p(e){return e.childElementCount>0?p(e.children[0]):e}var g=f.startContainer,m=h.startContainer,w=p(g.children[f.startOffset]),b=p(m.children[h.startOffset]);l=0,a=b.childNodes.length>0?b.childNodes[0]:b,i=w.childNodes.length>0?w.childNodes[0]:w,b instanceof HTMLElement?o=b.innerHTML.length:o=0}else f.startContainer===i?(a=h.endContainer,o=h.endOffset,l=f.startOffset):(a=f.startContainer,o=f.endOffset,l=h.startOffset)}else a=t.anchorNode,o=t.anchorOffset,i=t.focusNode,l=t.focusOffset;s=S&&ep(a)||C?t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:t.isCollapsed}else a=t.startContainer,o=t.startOffset,i=t.endContainer,l=t.endOffset,s=t.collapsed}if(null==a||null==i||null==o||null==l)throw Error("Cannot resolve a Slate range from DOM range: ".concat(t));C&&null!==(n=i.textContent)&&void 0!==n&&n.endsWith("\n\n")&&l===i.textContent.length&&l--,"getAttribute"in i&&"false"===i.getAttribute("contenteditable")&&"true"!==i.getAttribute("data-slate-void")&&(i=a,l=(null===(d=a.textContent)||void 0===d?void 0:d.length)||0);var y=eC.toSlatePoint(e,[a,o],{exactMatch:c,suppressThrow:u});if(!y)return null;var M=s?y:eC.toSlatePoint(e,[i,l],{exactMatch:c,suppressThrow:u});if(!M)return null;var k={anchor:y,focus:M};return v.e6.isExpanded(k)&&v.e6.isForward(k)&&ed(i)&&v.ML.void(e,{at:k.focus,mode:"highest"})&&(k=v.ML.unhangRange(e,k,{voids:!0})),k}};function eL(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduce((e,t)=>e.slice(0,t.start)+t.text+e.slice(t.end),e)}function eD(e,t){var{start:r,end:n,text:a}=t,o=e.slice(r,n),i=function(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++)if(e.charAt(n)!==t.charAt(n))return n;return r}(o,a),l=Math.min(o.length-i,a.length-i),s=function(e,t,r){for(var n=Math.min(e.length,t.length,r),a=0;a<n;a++)if(e.charAt(e.length-a-1)!==t.charAt(t.length-a-1))return a;return n}(o,a,l),d={start:r+i,end:n-s,text:a.slice(i,a.length-s)};return d.start===d.end&&0===d.text.length?null:d}function eS(e,t){var{path:r,offset:n}=t;if(!v.ML.hasPath(e,r))return null;var a=v.NB.get(e,r);if(!v.xv.isText(a))return null;var o=v.ML.above(e,{match:t=>v.W_.isElement(t)&&v.ML.isBlock(e,t),at:r});if(!o)return null;for(;n>a.text.length;){var i=v.ML.next(e,{at:r,match:v.xv.isText});if(!i||!v.y$.isDescendant(i[1],o[1]))return null;n-=a.text.length,a=i[0],r=i[1]}return{path:r,offset:n}}function eP(e,t){var r=eS(e,t.anchor);if(!r)return null;if(v.e6.isCollapsed(t))return{anchor:r,focus:r};var n=eS(e,t.focus);return n?{anchor:r,focus:n}:null}function eB(e,t,r){var n=ee.get(e),a=null==n?void 0:n.find(e=>{var{path:r}=e;return v.y$.equals(r,t.path)});if(!a||t.offset<=a.diff.start)return v.E9.transform(t,r,{affinity:"backward"});var{diff:o}=a;if(t.offset<=o.start+o.text.length){var i={path:t.path,offset:o.start},l=v.E9.transform(i,r,{affinity:"backward"});return l?{path:l.path,offset:l.offset+t.offset-o.start}:null}var s={path:t.path,offset:t.offset-o.text.length+o.end-o.start},d=v.E9.transform(s,r,{affinity:"backward"});return d?"split_node"===r.type&&v.y$.equals(r.path,t.path)&&s.offset<r.position&&o.start<r.position?d:{path:d.path,offset:d.offset+o.text.length-o.end+o.start}:null}function eF(e,t,r){var n=eB(e,t.anchor,r);if(!n)return null;if(v.e6.isCollapsed(t))return{anchor:n,focus:n};var a=eB(e,t.focus,r);return a?{anchor:n,focus:a}:null}function eR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eR(Object(r),!0).forEach(function(t){b(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var eN=function(){},ej=e=>(null==e?void 0:e.constructor.name)==="DataTransfer",eW=N?u.useLayoutEffect:u.useEffect,eA=["node"];function eI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var eq={subtree:!0,childList:!0,characterData:!0},eY=O?e=>{var t,{node:r}=e,n=m(e,eA);if(!O)return null;var a=M(),o=(t=(0,u.useRef)(!1),(0,u.useEffect)(()=>(t.current=!0,()=>{t.current=!1}),[]),t.current),[i]=(0,u.useState)(()=>(function(e){var{editor:t,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:n}=e,a=!1,o=null,i=null,l=null,s=0,d=!1,c=()=>{var e=er.get(t);if(er.delete(t),e){var{selection:r}=t,n=eP(t,e);!n||r&&v.e6.equals(n,r)||v.YR.select(t,n)}},u=()=>{var e=et.get(t);if(et.delete(t),e){if(e.at){var r=v.E9.isPoint(e.at)?eS(t,e.at):eP(t,e.at);if(!r)return;var n=v.ML.range(t,r);t.selection&&v.e6.equals(t.selection,n)||v.YR.select(t,r)}e.run()}},f=()=>{if(i&&(clearTimeout(i),i=null),l&&(clearTimeout(l),l=null),!w()&&!m()){c();return}a||(a=!0,setTimeout(()=>a=!1)),m()&&(a="action");var e=t.selection&&v.ML.rangeRef(t,t.selection,{affinity:"forward"});Q.set(t,t.marks),eN("flush",et.get(t),ee.get(t));for(var o=w();s=null===(f=ee.get(t))||void 0===f?void 0:f[0];){var s,f,h,p=G.get(t);void 0!==p&&(G.delete(t),t.marks=p),p&&!1===d&&(d=null);var g=function(e){var{path:t,diff:r}=e;return{anchor:{path:t,offset:r.start},focus:{path:t,offset:r.end}}}(s);t.selection&&v.e6.equals(t.selection,g)||v.YR.select(t,g),s.diff.text?v.ML.insertText(t,s.diff.text):v.ML.deleteFragment(t),ee.set(t,null===(h=ee.get(t))||void 0===h?void 0:h.filter(e=>{var{id:t}=e;return t!==s.id})),!function(e,t){var{path:r,diff:n}=t;if(!v.ML.hasPath(e,r))return!1;var a=v.NB.get(e,r);if(!v.xv.isText(a))return!1;if(n.start!==a.text.length||0===n.text.length)return a.text.slice(n.start,n.start+n.text.length)===n.text;var o=v.y$.next(r);if(!v.ML.hasPath(e,o))return!1;var i=v.NB.get(e,o);return v.xv.isText(i)&&i.text.startsWith(n.text)}(t,s)&&(o=!1,et.delete(t),Q.delete(t),a="action",er.delete(t),r.cancel(),n.cancel(),null==e||e.unref())}var b=null==e?void 0:e.unref();if(!b||er.get(t)||t.selection&&v.e6.equals(b,t.selection)||v.YR.select(t,b),m()){u();return}o&&r(),r.flush(),n.flush(),c();var y=Q.get(t);Q.delete(t),void 0!==y&&(t.marks=y,t.onChange())},h=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=Y.get(t);if(r){if(w()||e){r.style.display="none";return}r.style.removeProperty("display")}},p=(e,r)=>{var n,a,o,i,l,d,c,u,f=null!==(u=ee.get(t))&&void 0!==u?u:[];ee.set(t,f);var p=v.NB.leaf(t,e),g=f.findIndex(t=>v.y$.equals(t.path,e));if(g<0){eD(p.text,r)&&f.push({path:e,diff:r,id:s++}),h();return}var m=(n=p.text,o=Math.min((a=f[g].diff).start,r.start),i=Math.max(0,Math.min(a.start+a.text.length,r.end)-r.start),l=eL(n,a,r),d=Math.max(r.start+r.text.length,a.start+a.text.length+(a.start+a.text.length>r.start?r.text.length:0)-i),c=l.slice(o,d),eD(n,{start:o,end:Math.max(a.end,r.end-a.text.length+(a.end-a.start)),text:c}));if(!m){f.splice(g,1),h();return}f[g]=eT(eT({},f[g]),{},{diff:m})},g=function(e){var{at:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d=!1,er.delete(t),r.cancel(),n.cancel(),m()&&f(),et.set(t,{at:a,run:e}),l=setTimeout(f)},m=()=>!!et.get(t),w=()=>{var e;return!!(null!==(e=ee.get(t))&&void 0!==e&&e.length)},b=e=>{er.set(t,e),i&&(clearTimeout(i),i=null);var{selection:r}=t;if(e){var n=!r||!v.y$.equals(r.anchor.path,e.anchor.path),a=!r||!v.y$.equals(r.anchor.path.slice(0,-1),e.anchor.path.slice(0,-1));(n&&d||a)&&(d=!1),(n||w())&&(i=setTimeout(f,200))}},y=()=>{m()||(l=setTimeout(f))};return{flush:f,scheduleFlush:y,hasPendingDiffs:w,hasPendingAction:m,hasPendingChanges:()=>m()||w(),isFlushing:()=>a,handleUserSelect:b,handleCompositionEnd:e=>{o&&clearTimeout(o),o=setTimeout(()=>{K.set(t,!1),f()},25)},handleCompositionStart:e=>{K.set(t,!0),o&&(clearTimeout(o),o=null)},handleDOMBeforeInput:e=>{i&&(clearTimeout(i),i=null);var{inputType:r}=e,n=null,a=e.dataTransfer||e.data||void 0;!1!==d&&"insertText"!==r&&"insertCompositionText"!==r&&(d=!1);var[o]=e.getTargetRanges();o&&(n=eC.toSlateRange(t,o,{exactMatch:!1,suppressThrow:!0}));var l=eC.getWindow(t).getSelection();if(!n&&l&&(o=l,n=eC.toSlateRange(t,l,{exactMatch:!1,suppressThrow:!0})),n=null!==(P=n)&&void 0!==P?P:t.selection){var s=!0;if(r.startsWith("delete")){if(v.e6.isExpanded(n)){var[c,u]=v.e6.edges(n);if(v.NB.leaf(t,c.path).text.length===c.offset&&0===u.offset){var f=v.ML.next(t,{at:c.path,match:v.xv.isText});f&&v.y$.equals(f[1],u.path)&&(n={anchor:u,focus:u})}}var h=r.endsWith("Backward")?"backward":"forward",[m,w]=v.e6.edges(n),[M,k]=v.ML.leaf(t,m.path),x={text:"",start:m.offset,end:w.offset},E=ee.get(t),O=null==E?void 0:E.find(e=>v.y$.equals(e.path,k)),C=O?[O.diff,x]:[x];if(0===eL(M.text,...C).length&&(s=!1),v.e6.isExpanded(n)){if(s&&v.y$.equals(n.anchor.path,n.focus.path)){var L={path:n.anchor.path,offset:m.offset};return b(v.ML.range(t,L,L)),p(n.anchor.path,{text:"",end:w.offset,start:m.offset})}return g(()=>v.ML.deleteFragment(t,{direction:h}),{at:n})}}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return g(()=>v.ML.deleteFragment(t),{at:n});case"deleteContent":case"deleteContentForward":var{anchor:D}=n;if(s&&v.e6.isCollapsed(n)){var S=v.NB.leaf(t,D.path);if(D.offset<S.text.length)return p(D.path,{text:"",start:D.offset,end:D.offset+1})}return g(()=>v.ML.deleteForward(t),{at:n});case"deleteContentBackward":var P,B,{anchor:F}=n,R=eu(o)?o.isCollapsed:!!(null!==(B=o)&&void 0!==B&&B.collapsed);if(s&&R&&v.e6.isCollapsed(n)&&F.offset>0)return p(F.path,{text:"",start:F.offset-1,end:F.offset});return g(()=>v.ML.deleteBackward(t),{at:n});case"deleteEntireSoftLine":return g(()=>{v.ML.deleteBackward(t,{unit:"line"}),v.ML.deleteForward(t,{unit:"line"})},{at:n});case"deleteHardLineBackward":return g(()=>v.ML.deleteBackward(t,{unit:"block"}),{at:n});case"deleteSoftLineBackward":return g(()=>v.ML.deleteBackward(t,{unit:"line"}),{at:n});case"deleteHardLineForward":return g(()=>v.ML.deleteForward(t,{unit:"block"}),{at:n});case"deleteSoftLineForward":return g(()=>v.ML.deleteForward(t,{unit:"line"}),{at:n});case"deleteWordBackward":return g(()=>v.ML.deleteBackward(t,{unit:"word"}),{at:n});case"deleteWordForward":return g(()=>v.ML.deleteForward(t,{unit:"word"}),{at:n});case"insertLineBreak":return g(()=>v.ML.insertSoftBreak(t),{at:n});case"insertParagraph":return g(()=>v.ML.insertBreak(t),{at:n});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":if(ej(a))return g(()=>eC.insertData(t,a),{at:n});var T=null!=a?a:"";if(G.get(t)&&(T=T.replace("\uFEFF","")),"insertText"===r&&/.*\n.*\n$/.test(T)&&(T=T.slice(0,-1)),T.includes("\n"))return g(()=>{var e=T.split("\n");e.forEach((r,n)=>{r&&v.ML.insertText(t,r),n!==e.length-1&&v.ML.insertSoftBreak(t)})},{at:n});if(v.y$.equals(n.anchor.path,n.focus.path)){var[N,j]=v.e6.edges(n),W={start:N.offset,end:j.offset,text:T};if(T&&d&&"insertCompositionText"===r){var A=d.start+d.text.search(/\S|$/);W.start+W.text.search(/\S|$/)===A+1&&W.end===d.start+d.text.length?(W.start-=1,d=null,y()):d=!1}else d="insertText"===r&&(null===d?W:!!(d&&v.e6.isCollapsed(n))&&d.end+d.text.length===N.offset&&eT(eT({},d),{},{text:d.text+T}));if(s){p(N.path,W);return}}return g(()=>v.ML.insertText(t,T),{at:n})}}},handleKeyDown:e=>{w()||(h(!0),setTimeout(h))},handleDomMutations:e=>{if(!(w()||m())&&e.some(r=>ek(t,r,e))){var r;null===(r=en.get(t))||void 0===r||r()}},handleInput:()=>{(m()||!w())&&f()}}})(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eI(Object(r),!0).forEach(function(t){b(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({editor:a},n)));return!function(e,t,r){var[n]=(0,u.useState)(()=>new MutationObserver(t));eW(()=>{n.takeRecords()}),(0,u.useEffect)(()=>{if(!e.current)throw Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(e.current,r),()=>n.disconnect()},[n,e,r])}(r,i.handleDomMutations,eq),Z.set(a,i.scheduleFlush),o&&i.flush(),i}:()=>null,e$=["anchor","focus"],e_=["anchor","focus"],eU=(e,t)=>Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(r=>t.hasOwnProperty(r)&&e[r]===t[r]),ez=(e,t)=>{var r=m(e,e$),n=m(t,e_);return e[ea]===t[ea]&&eU(r,n)},eV=(e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],a=t[r];if(!v.e6.equals(n,a)||!ez(n,a))return!1}return!0},eH=(e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],a=t[r];if(n.anchor.offset!==a.anchor.offset||n.focus.offset!==a.focus.offset||!ez(n,a))return!1}return!0};function eK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var eX=e=>{var{isLast:t,leaf:r,parent:n,text:a}=e,o=M(),i=eC.findPath(o,a),l=v.y$.parent(i),s=!!r[eo];return o.isVoid(n)?u.createElement(eG,{length:v.NB.string(n).length}):""!==r.text||n.children[n.children.length-1]!==a||o.isInline(n)||""!==v.ML.string(o,l)?""===r.text?u.createElement(eG,{isMarkPlaceholder:s}):t&&"\n"===r.text.slice(-1)?u.createElement(eJ,{isTrailing:!0,text:r.text}):u.createElement(eJ,{text:r.text}):u.createElement(eG,{isLineBreak:!0,isMarkPlaceholder:s})},eJ=e=>{var{text:t,isTrailing:r=!1}=e,n=(0,u.useRef)(null),a=()=>"".concat(null!=t?t:"").concat(r?"\n":""),[o]=(0,u.useState)(a);return eW(()=>{var e=a();n.current&&n.current.textContent!==e&&(n.current.textContent=e)}),u.createElement(eZ,{ref:n},o)},eZ=(0,u.memo)((0,u.forwardRef)((e,t)=>u.createElement("span",{"data-slate-string":!0,ref:t},e.children))),eG=e=>{var{length:t=0,isLineBreak:r=!1,isMarkPlaceholder:n=!1}=e,a={"data-slate-zero-width":r?"n":"z","data-slate-length":t};return n&&(a["data-slate-mark-placeholder"]=!0),u.createElement("span",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eK(Object(r),!0).forEach(function(t){b(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eK(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},a),(O||x)&&r?null:"\uFEFF",r?u.createElement("br",null):null)};function eQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function e0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eQ(Object(r),!0).forEach(function(t){b(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eQ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var e1=O?300:0;function e6(e){e.current&&(clearTimeout(e.current),e.current=null)}var e2=u.memo(e=>{var{leaf:t,isLast:r,text:n,parent:a,renderPlaceholder:o,renderLeaf:i=e=>u.createElement(e9,e0({},e))}=e,l=M(),s=(0,u.useRef)(null),d=(0,u.useRef)(null),[c,f]=(0,u.useState)(!1),v=(0,u.useRef)(null),p=(0,u.useCallback)(e=>{if(r=null==e,s.current&&(s.current.disconnect(),r&&(s.current=null)),null==e)Y.delete(l),null===(n=t.onPlaceholderResize)||void 0===n||n.call(t,null);else{if(Y.set(l,e),!s.current){var r,n,a=window.ResizeObserver||h.do;s.current=new a(()=>{var r;null===(r=t.onPlaceholderResize)||void 0===r||r.call(t,e)})}s.current.observe(e),d.current=e}},[d,t,l]),g=u.createElement(eX,{isLast:r,leaf:t,parent:a,text:n}),m=!!t[ea];if((0,u.useEffect)(()=>(m?v.current||(v.current=setTimeout(()=>{f(!0),v.current=null},e1)):(e6(v),f(!1)),()=>e6(v)),[m,f]),m&&c){var w={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:L?"inherit":void 0},contentEditable:!1,ref:p}};g=u.createElement(u.Fragment,null,o(w),g)}return i({attributes:{"data-slate-leaf":!0},children:g,leaf:t,text:n})},(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&v.xv.equals(t.leaf,e.leaf)&&t.leaf[ea]===e.leaf[ea]),e9=e=>{var{attributes:t,children:r}=e;return u.createElement("span",e0({},t),r)},e4=u.memo(e=>{for(var{decorations:t,isLast:r,parent:n,renderPlaceholder:a,renderLeaf:o,text:i}=e,l=M(),s=(0,u.useRef)(null),d=v.xv.decorations(i,t),c=eC.findKey(l,i),f=[],h=0;h<d.length;h++){var p=d[h];f.push(u.createElement(e2,{isLast:r&&h===d.length-1,key:"".concat(c.id,"-").concat(h),renderPlaceholder:a,leaf:p,text:i,parent:n,renderLeaf:o}))}var g=(0,u.useCallback)(e=>{var t=z.get(l);e?(null==t||t.set(c,e),_.set(i,e),$.set(e,i)):(null==t||t.delete(c),_.delete(i),s.current&&$.delete(s.current)),s.current=e},[s,l,c,i]);return u.createElement("span",{"data-slate-node":"text",ref:g},f)},(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&eH(t.decorations,e.decorations));function e3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function e5(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e3(Object(r),!0).forEach(function(t){b(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e3(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var e8=u.memo(e=>{var{decorations:t,element:r,renderElement:n=e=>u.createElement(e7,e5({},e)),renderPlaceholder:a,renderLeaf:o,selection:l}=e,s=M(),d=ti(),c=s.isInline(r),f=eC.findKey(s,r),h=(0,u.useCallback)(e=>{var t=z.get(s);e?(null==t||t.set(f,e),_.set(r,e),$.set(e,r)):(null==t||t.delete(f),_.delete(r))},[s,f,r]),p=ta({decorations:t,node:r,renderElement:n,renderPlaceholder:a,renderLeaf:o,selection:l}),g={"data-slate-node":"element",ref:h};if(c&&(g["data-slate-inline"]=!0),!c&&v.ML.hasInlines(s,r)){var m=v.NB.string(r),w=i()(m);"rtl"===w&&(g.dir=w)}if(v.ML.isVoid(s,r)){g["data-slate-void"]=!0,!d&&c&&(g.contentEditable=!1);var[[b]]=v.NB.texts(r);p=u.createElement(c?"span":"div",{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},u.createElement(e4,{renderPlaceholder:a,decorations:[],isLast:!1,parent:r,text:b})),W.set(b,0),A.set(b,r)}return n({attributes:g,children:p,element:r})},(e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&eV(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&v.e6.equals(e.selection,t.selection))),e7=e=>{var{attributes:t,children:r,element:n}=e,a=M().isInline(n)?"span":"div";return u.createElement(a,e5(e5({},t),{},{style:{position:"relative"}}),r)},te=(0,u.createContext)(()=>[]),tt=()=>(0,u.useContext)(te),tr=(0,u.createContext)(!1),tn=()=>(0,u.useContext)(tr),ta=e=>{for(var{decorations:t,node:r,renderElement:n,renderPlaceholder:a,renderLeaf:o,selection:i}=e,l=tt(),s=M(),d=eC.findPath(s,r),c=[],f=v.W_.isElement(r)&&!s.isInline(r)&&v.ML.hasInlines(s,r),h=0;h<r.children.length;h++){var p=d.concat(h),g=r.children[h],m=eC.findKey(s,g),w=v.ML.range(s,p),b=i&&v.e6.intersection(w,i),y=l([g,p]);for(var k of t){var x=v.e6.intersection(k,w);x&&y.push(x)}v.W_.isElement(g)?c.push(u.createElement(tr.Provider,{key:"provider-".concat(m.id),value:!!b},u.createElement(e8,{decorations:y,element:g,key:m.id,renderElement:n,renderPlaceholder:a,renderLeaf:o,selection:b}))):c.push(u.createElement(e4,{decorations:y,key:m.id,isLast:f&&h===r.children.length-1,parent:r,renderPlaceholder:a,renderLeaf:o,text:g})),W.set(g,h),A.set(g,r)}return c},to=(0,u.createContext)(!1),ti=()=>(0,u.useContext)(to),tl=(0,u.createContext)(null),ts=()=>{var e=(0,u.useContext)(tl);if(!e)throw Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:t}=e;return t},td={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},tc={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},tu={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},tf=e=>{var t=td[e],r=tc[e],n=tu[e],a=t&&(0,p.P6)(t),o=r&&(0,p.P6)(r),i=n&&(0,p.P6)(n);return e=>!!(a&&a(e)||E&&o&&o(e)||!E&&i&&i(e))},tv={isBold:tf("bold"),isCompose:tf("compose"),isMoveBackward:tf("moveBackward"),isMoveForward:tf("moveForward"),isDeleteBackward:tf("deleteBackward"),isDeleteForward:tf("deleteForward"),isDeleteLineBackward:tf("deleteLineBackward"),isDeleteLineForward:tf("deleteLineForward"),isDeleteWordBackward:tf("deleteWordBackward"),isDeleteWordForward:tf("deleteWordForward"),isExtendBackward:tf("extendBackward"),isExtendForward:tf("extendForward"),isExtendLineBackward:tf("extendLineBackward"),isExtendLineForward:tf("extendLineForward"),isItalic:tf("italic"),isMoveLineBackward:tf("moveLineBackward"),isMoveLineForward:tf("moveLineForward"),isMoveWordBackward:tf("moveWordBackward"),isMoveWordForward:tf("moveWordForward"),isRedo:tf("redo"),isSoftBreak:tf("insertSoftBreak"),isSplitBlock:tf("splitBlock"),isTransposeCharacter:tf("transposeCharacter"),isUndo:tf("undo")},th=(e,t)=>{var r=[],n=()=>{r=[]};return{registerMutations:n=>{if(t.current){var a=n.filter(t=>ek(e,t,n));r.push(...a)}},restoreDOM:function(){r.length>0&&(r.reverse().forEach(e=>{"characterData"!==e.type&&(e.removedNodes.forEach(t=>{e.target.insertBefore(t,e.nextSibling)}),e.addedNodes.forEach(t=>{e.target.removeChild(t)}))}),n())},clear:n}},tp={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class tg extends u.Component{constructor(){super(...arguments),b(this,"context",null),b(this,"manager",null),b(this,"mutationObserver",null)}observe(){var e,{node:t}=this.props;if(!t.current)throw Error("Failed to attach MutationObserver, `node` is undefined");null===(e=this.mutationObserver)||void 0===e||e.observe(t.current,tp)}componentDidMount(){var{receivedUserInput:e}=this.props,t=this.context;this.manager=th(t,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,t,r,n,a=null===(e=this.mutationObserver)||void 0===e?void 0:e.takeRecords();return null!=a&&a.length&&(null===(n=this.manager)||void 0===n||n.registerMutations(a)),null===(t=this.mutationObserver)||void 0===t||t.disconnect(),null===(r=this.manager)||void 0===r||r.restoreDOM(),null}componentDidUpdate(){var e;null===(e=this.manager)||void 0===e||e.clear(),this.observe()}componentWillUnmount(){var e;null===(e=this.mutationObserver)||void 0===e||e.disconnect()}render(){return this.props.children}}b(tg,"contextType",y);var tm=O?tg:e=>{var{children:t}=e;return u.createElement(u.Fragment,null,t)},tw=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],tb=["text"];function ty(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ty(Object(r),!0).forEach(function(t){b(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ty(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var tk=e=>u.createElement(u.Fragment,null,ta(e)),tx=(0,u.forwardRef)((e,t)=>{var r,n,a,o,l=(0,u.useCallback)(e=>u.createElement(tE,tM({},e)),[]),{autoFocus:d,decorate:f=tO,onDOMBeforeInput:h,placeholder:p,readOnly:g=!1,renderElement:w,renderLeaf:b,renderPlaceholder:y=l,scrollSelectionIntoView:k=tC,style:E={},as:D="div",disableDefaultStyles:P=!1}=e,B=m(e,tw),W=ts(),[A,Y]=(0,u.useState)(!1),U=(0,u.useRef)(null),z=(0,u.useRef)([]),[J,Z]=(0,u.useState)(),ee=(0,u.useRef)(!1),{onUserInput:et,receivedUserInput:er}=(r=M(),n=(0,u.useRef)(!1),a=(0,u.useRef)(0),o=(0,u.useCallback)(()=>{if(!n.current){n.current=!0;var e=eC.getWindow(r);e.cancelAnimationFrame(a.current),a.current=e.requestAnimationFrame(()=>{n.current=!1})}},[r]),(0,u.useEffect)(()=>()=>cancelAnimationFrame(a.current),[]),{receivedUserInput:n,onUserInput:o}),[,ei]=(0,u.useReducer)(e=>e+1,0);en.set(W,ei),V.set(W,g);var es=(0,u.useMemo)(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);(0,u.useEffect)(()=>{U.current&&d&&U.current.focus()},[d]);var eu=(0,u.useRef)(),ef=(0,u.useMemo)(()=>c()(()=>{var e=eC.toDOMNode(W,W).getRootNode();if(!ee.current&&L&&e instanceof ShadowRoot){ee.current=!0,ex()?document.execCommand("indent"):v.YR.deselect(W),ee.current=!1;return}var t=eu.current;if((O||!eC.isComposing(W))&&(!es.isUpdatingSelection||null!=t&&t.isFlushing())&&!es.isDraggingInternally){var r=eC.findDocumentOrShadowRoot(W),{activeElement:n}=r,a=eC.toDOMNode(W,W),o=eM(r);if(n===a?(es.latestElement=n,H.set(W,!0)):H.delete(W),!o)return v.YR.deselect(W);var{anchorNode:i,focusNode:l}=o,s=eC.hasEditableTarget(W,i)||eC.isTargetInsideNonReadonlyVoid(W,i),d=eC.hasEditableTarget(W,l)||eC.isTargetInsideNonReadonlyVoid(W,l);if(s&&d){var c=eC.toSlateRange(W,o,{exactMatch:!1,suppressThrow:!0});c&&(eC.isComposing(W)||null!=t&&t.hasPendingChanges()||null!=t&&t.isFlushing()?null==t||t.handleUserSelect(c):v.YR.select(W,c))}!g||s&&d||v.YR.deselect(W)}},100),[W,g,es]),eh=(0,u.useMemo)(()=>s()(ef,0),[ef]);eu.current=eY({node:U,onDOMSelectionChange:ef,scheduleOnDOMSelectionChange:eh}),eW(()=>{U.current&&(r=el(U.current))?(I.set(W,r),q.set(W,U.current),_.set(W,U.current),$.set(U.current,W)):_.delete(W);var e,t,r,{selection:n}=W,a=eM(eC.findDocumentOrShadowRoot(W));if(!(!a||!eC.isFocused(W)||null!==(e=eu.current)&&void 0!==e&&e.hasPendingAction())){var o=e=>{var t="None"!==a.type;if(n||t){var r=a.focusNode;if(C&&a.rangeCount>1){var o=a.getRangeAt(0),i=a.getRangeAt(a.rangeCount-1);d=o.startContainer===r?i.endContainer:o.startContainer}else d=a.anchorNode;var l=q.get(W),s=!1;if(l.contains(d)&&l.contains(r)&&(s=!0),t&&s&&n&&!e){var d,c,u=eC.toSlateRange(W,a,{exactMatch:!0,suppressThrow:!0});if(u&&v.e6.equals(u,n)&&(!es.hasMarkPlaceholder||null!==(c=d)&&void 0!==c&&null!==(c=c.parentElement)&&void 0!==c&&c.hasAttribute("data-slate-mark-placeholder")))return}if(n&&!eC.hasRange(W,n)){W.selection=eC.toSlateRange(W,a,{exactMatch:!1,suppressThrow:!0});return}es.isUpdatingSelection=!0;var f=n&&eC.toDOMRange(W,n);return f?(eC.isComposing(W)&&!O?a.collapseToEnd():v.e6.isBackward(n)?a.setBaseAndExtent(f.endContainer,f.endOffset,f.startContainer,f.startOffset):a.setBaseAndExtent(f.startContainer,f.startOffset,f.endContainer,f.endOffset),k(W,f)):a.removeAllRanges(),f}};a.rangeCount<=1&&o();var i=(null===(t=eu.current)||void 0===t?void 0:t.isFlushing())==="action";if(!O||!i){setTimeout(()=>{es.isUpdatingSelection=!1});return}var l=null,s=requestAnimationFrame(()=>{if(i){var e=e=>{try{eC.toDOMNode(W,W).focus(),o(e)}catch(e){}};e(),l=setTimeout(()=>{e(!0),es.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(s),l&&clearTimeout(l)}}});var ep=(0,u.useCallback)(e=>{var t=eC.toDOMNode(W,W).getRootNode();if(null!=ee&&ee.current&&L&&t instanceof ShadowRoot){var r=e.getTargetRanges()[0],n=new window.Range;n.setStart(r.startContainer,r.startOffset),n.setEnd(r.endContainer,r.endOffset);var a=eC.toSlateRange(W,n,{exactMatch:!1,suppressThrow:!1});v.YR.select(W,a),e.preventDefault(),e.stopImmediatePropagation();return}if(et(),!g&&eC.hasEditableTarget(W,e.target)&&!tS(e,h)){if(eu.current)return eu.current.handleDOMBeforeInput(e);eh.flush(),ef.flush();var{selection:o}=W,{inputType:i}=e,l=e.dataTransfer||e.data||void 0,s="insertCompositionText"===i||"deleteCompositionText"===i;if(s&&eC.isComposing(W))return;var d=!1;if("insertText"===i&&o&&v.e6.isCollapsed(o)&&e.data&&1===e.data.length&&/[a-z ]/i.test(e.data)&&0!==o.anchor.offset){d=!0,W.marks&&(d=!1);var{anchor:c}=o,[u,f]=eC.toDOMPoint(W,c),p=null===(b=u.parentElement)||void 0===b?void 0:b.closest("a"),m=eC.getWindow(W);if(d&&p&&eC.hasDOMNode(W,p)){var w,b,y,M,k=null==m?void 0:m.document.createTreeWalker(p,NodeFilter.SHOW_TEXT).lastChild();k===u&&(null===(M=k.textContent)||void 0===M?void 0:M.length)===f&&(d=!1)}if(d&&u.parentElement&&(null==m||null===(y=m.getComputedStyle(u.parentElement))||void 0===y?void 0:y.whiteSpace)==="pre"){var x=v.ML.above(W,{at:c.path,match:e=>v.W_.isElement(e)&&v.ML.isBlock(W,e)});x&&v.NB.string(x[0]).includes("	")&&(d=!1)}}if(!i.startsWith("delete")||i.startsWith("deleteBy")){var[E]=e.getTargetRanges();if(E){var O=eC.toSlateRange(W,E,{exactMatch:!1,suppressThrow:!1});if(!o||!v.e6.equals(o,O)){d=!1;var C=!s&&W.selection&&v.ML.rangeRef(W,W.selection);v.YR.select(W,O),C&&X.set(W,C)}}}if(s)return;if(d||e.preventDefault(),o&&v.e6.isExpanded(o)&&i.startsWith("delete")){var D=i.endsWith("Backward")?"backward":"forward";v.ML.deleteFragment(W,{direction:D});return}switch(i){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":v.ML.deleteFragment(W);break;case"deleteContent":case"deleteContentForward":v.ML.deleteForward(W);break;case"deleteContentBackward":v.ML.deleteBackward(W);break;case"deleteEntireSoftLine":v.ML.deleteBackward(W,{unit:"line"}),v.ML.deleteForward(W,{unit:"line"});break;case"deleteHardLineBackward":v.ML.deleteBackward(W,{unit:"block"});break;case"deleteSoftLineBackward":v.ML.deleteBackward(W,{unit:"line"});break;case"deleteHardLineForward":v.ML.deleteForward(W,{unit:"block"});break;case"deleteSoftLineForward":v.ML.deleteForward(W,{unit:"line"});break;case"deleteWordBackward":v.ML.deleteBackward(W,{unit:"word"});break;case"deleteWordForward":v.ML.deleteForward(W,{unit:"word"});break;case"insertLineBreak":v.ML.insertSoftBreak(W);break;case"insertParagraph":v.ML.insertBreak(W);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":"insertFromComposition"===i&&eC.isComposing(W)&&(Y(!1),K.set(W,!1)),(null==l?void 0:l.constructor.name)==="DataTransfer"?eC.insertData(W,l):"string"==typeof l&&(d?z.current.push(()=>v.ML.insertText(W,l)):v.ML.insertText(W,l))}var S=null===(w=X.get(W))||void 0===w?void 0:w.unref();X.delete(W),!S||W.selection&&v.e6.equals(W.selection,S)||v.YR.select(W,S)}},[W,ef,et,h,g,eh]),eg=(0,u.useCallback)(e=>{null==e?(ef.cancel(),eh.cancel(),q.delete(W),_.delete(W),U.current&&j&&U.current.removeEventListener("beforeinput",ep)):j&&e.addEventListener("beforeinput",ep),U.current=e,"function"==typeof t?t(e):t&&(t.current=e)},[ef,eh,W,ep,t]);eW(()=>{var e=eC.getWindow(W);e.document.addEventListener("selectionchange",eh);var t=()=>{es.isDraggingInternally=!1};return e.document.addEventListener("dragend",t),e.document.addEventListener("drop",t),()=>{e.document.removeEventListener("selectionchange",eh),e.document.removeEventListener("dragend",t),e.document.removeEventListener("drop",t)}},[eh,es]);var em=f([W,[]]),ew=p&&1===W.children.length&&1===Array.from(v.NB.texts(W)).length&&""===v.NB.string(W)&&!A,eb=(0,u.useCallback)(e=>{if(e&&ew){var t;Z(null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.height)}else Z(void 0)},[ew]);if(ew){var ey=v.ML.start(W,[]);em.push({[ea]:!0,placeholder:p,onPlaceholderResize:eb,anchor:ey,focus:ey})}var{marks:ek}=W;if(es.hasMarkPlaceholder=!1,W.selection&&v.e6.isCollapsed(W.selection)&&ek){var{anchor:eE}=W.selection,eO=v.NB.leaf(W,eE.path),eL=m(eO,tb);if(!v.xv.equals(eO,ek,{loose:!0})){es.hasMarkPlaceholder=!0;var eD=Object.fromEntries(Object.keys(eL).map(e=>[e,null]));em.push(tM(tM(tM({[eo]:!0},eD),ek),{},{anchor:eE,focus:eE}))}}return(0,u.useEffect)(()=>{setTimeout(()=>{var{selection:e}=W;if(e){var{anchor:t}=e,r=v.NB.leaf(W,t.path);if(ek&&!v.xv.equals(r,ek,{loose:!0})){G.set(W,ek);return}}G.delete(W)})}),u.createElement(to.Provider,{value:g},u.createElement(te.Provider,{value:f},u.createElement(tm,{node:U,receivedUserInput:er},u.createElement(D,tM(tM({role:g?void 0:"textbox","aria-multiline":!g||void 0},B),{},{spellCheck:(!!j||!N)&&B.spellCheck,autoCorrect:j||!N?B.autoCorrect:"false",autoCapitalize:j||!N?B.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!g,zindex:-1,suppressContentEditableWarning:!0,ref:eg,style:tM(tM({},P?{}:tM({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},J?{minHeight:J}:{})),E),onBeforeInput:(0,u.useCallback)(e=>{if(!j&&!g&&!tL(e,B.onBeforeInput)&&eC.hasSelectableTarget(W,e.target)&&(e.preventDefault(),!eC.isComposing(W))){var t=e.data;v.ML.insertText(W,t)}},[B.onBeforeInput,W,g]),onInput:(0,u.useCallback)(e=>{if(!tL(e,B.onInput)){if(eu.current){eu.current.handleInput();return}for(var t of z.current)t();z.current=[]}},[B.onInput]),onBlur:(0,u.useCallback)(e=>{if(!(g||es.isUpdatingSelection||!eC.hasSelectableTarget(W,e.target)||tL(e,B.onBlur))){var t=eC.findDocumentOrShadowRoot(W);if(es.latestElement!==t.activeElement){var{relatedTarget:r}=e;if(!(r===eC.toDOMNode(W,W)||ed(r)&&r.hasAttribute("data-slate-spacer"))){if(null!=r&&ec(r)&&eC.hasDOMNode(W,r)){var n=eC.toSlateNode(W,r);if(v.W_.isElement(n)&&!W.isVoid(n))return}if(L){var a=eM(t);null==a||a.removeAllRanges()}H.delete(W)}}}},[g,es.isUpdatingSelection,es.latestElement,W,B.onBlur]),onClick:(0,u.useCallback)(e=>{if(eC.hasTarget(W,e.target)&&!tL(e,B.onClick)&&ec(e.target)){var t=eC.toSlateNode(W,e.target),r=eC.findPath(W,t);if(v.ML.hasPath(W,r)&&v.NB.get(W,r)===t){if(3===e.detail&&r.length>=1){var n=r;if(!(v.W_.isElement(t)&&v.ML.isBlock(W,t))){var a,o=v.ML.above(W,{match:e=>v.W_.isElement(e)&&v.ML.isBlock(W,e),at:r});n=null!==(a=null==o?void 0:o[1])&&void 0!==a?a:r.slice(0,1)}var i=v.ML.range(W,n);v.YR.select(W,i);return}if(!g){var l=v.ML.start(W,r),s=v.ML.end(W,r),d=v.ML.void(W,{at:l}),c=v.ML.void(W,{at:s});if(d&&c&&v.y$.equals(d[1],c[1])){var u=v.ML.range(W,l);v.YR.select(W,u)}}}}},[W,B.onClick,g]),onCompositionEnd:(0,u.useCallback)(e=>{if(eC.hasSelectableTarget(W,e.target)){var t;if(eC.isComposing(W)&&Promise.resolve().then(()=>{Y(!1),K.set(W,!1)}),null===(t=eu.current)||void 0===t||t.handleCompositionEnd(e),!tL(e,B.onCompositionEnd)&&!O&&!L&&!F&&!x&&!T&&!R&&e.data){var r=G.get(W);G.delete(W),void 0!==r&&(Q.set(W,W.marks),W.marks=r),v.ML.insertText(W,e.data);var n=Q.get(W);Q.delete(W),void 0!==n&&(W.marks=n)}}},[B.onCompositionEnd,W]),onCompositionUpdate:(0,u.useCallback)(e=>{!eC.hasSelectableTarget(W,e.target)||tL(e,B.onCompositionUpdate)||eC.isComposing(W)||(Y(!0),K.set(W,!0))},[B.onCompositionUpdate,W]),onCompositionStart:(0,u.useCallback)(e=>{if(eC.hasSelectableTarget(W,e.target)&&(null===(t=eu.current)||void 0===t||t.handleCompositionStart(e),!tL(e,B.onCompositionStart)&&!O)){Y(!0);var t,{selection:r}=W;if(r&&v.e6.isExpanded(r)){v.ML.deleteFragment(W);return}}},[B.onCompositionStart,W]),onCopy:(0,u.useCallback)(e=>{!eC.hasSelectableTarget(W,e.target)||tL(e,B.onCopy)||tD(e)||(e.preventDefault(),eC.setFragmentData(W,e.clipboardData,"copy"))},[B.onCopy,W]),onCut:(0,u.useCallback)(e=>{if(!g&&eC.hasSelectableTarget(W,e.target)&&!tL(e,B.onCut)&&!tD(e)){e.preventDefault(),eC.setFragmentData(W,e.clipboardData,"cut");var{selection:t}=W;if(t){if(v.e6.isExpanded(t))v.ML.deleteFragment(W);else{var r=v.NB.parent(W,t.anchor.path);v.ML.isVoid(W,r)&&v.YR.delete(W)}}}},[g,W,B.onCut]),onDragOver:(0,u.useCallback)(e=>{if(eC.hasTarget(W,e.target)&&!tL(e,B.onDragOver)){var t=eC.toSlateNode(W,e.target);v.W_.isElement(t)&&v.ML.isVoid(W,t)&&e.preventDefault()}},[B.onDragOver,W]),onDragStart:(0,u.useCallback)(e=>{if(!g&&eC.hasTarget(W,e.target)&&!tL(e,B.onDragStart)){var t=eC.toSlateNode(W,e.target),r=eC.findPath(W,t);if(v.W_.isElement(t)&&v.ML.isVoid(W,t)||v.ML.void(W,{at:r,voids:!0})){var n=v.ML.range(W,r);v.YR.select(W,n)}es.isDraggingInternally=!0,eC.setFragmentData(W,e.dataTransfer,"drag")}},[g,W,B.onDragStart,es]),onDrop:(0,u.useCallback)(e=>{if(!g&&eC.hasTarget(W,e.target)&&!tL(e,B.onDrop)){e.preventDefault();var t=W.selection,r=eC.findEventRange(W,e),n=e.dataTransfer;v.YR.select(W,r),es.isDraggingInternally&&t&&!v.e6.equals(t,r)&&!v.ML.void(W,{at:r,voids:!0})&&v.YR.delete(W,{at:t}),eC.insertData(W,n),eC.isFocused(W)||eC.focus(W)}},[g,W,B.onDrop,es]),onDragEnd:(0,u.useCallback)(e=>{!g&&es.isDraggingInternally&&B.onDragEnd&&eC.hasTarget(W,e.target)&&B.onDragEnd(e)},[g,es,B,W]),onFocus:(0,u.useCallback)(e=>{if(!g&&!es.isUpdatingSelection&&eC.hasEditableTarget(W,e.target)&&!tL(e,B.onFocus)){var t=eC.toDOMNode(W,W),r=eC.findDocumentOrShadowRoot(W);if(es.latestElement=r.activeElement,C&&e.target!==t){t.focus();return}H.set(W,!0)}},[g,es,W,B.onFocus]),onKeyDown:(0,u.useCallback)(e=>{if(!g&&eC.hasEditableTarget(W,e.target)){null===(t=eu.current)||void 0===t||t.handleKeyDown(e);var t,{nativeEvent:r}=e;if(eC.isComposing(W)&&!1===r.isComposing&&(K.set(W,!1),Y(!1)),!(tL(e,B.onKeyDown)||eC.isComposing(W))){var{selection:n}=W,a=W.children[null!==n?n.focus.path[0]:0],o="rtl"===i()(v.NB.string(a));if(tv.isRedo(r)){e.preventDefault(),"function"==typeof W.redo&&W.redo();return}if(tv.isUndo(r)){e.preventDefault(),"function"==typeof W.undo&&W.undo();return}if(tv.isMoveLineBackward(r)){e.preventDefault(),v.YR.move(W,{unit:"line",reverse:!0});return}if(tv.isMoveLineForward(r)){e.preventDefault(),v.YR.move(W,{unit:"line"});return}if(tv.isExtendLineBackward(r)){e.preventDefault(),v.YR.move(W,{unit:"line",edge:"focus",reverse:!0});return}if(tv.isExtendLineForward(r)){e.preventDefault(),v.YR.move(W,{unit:"line",edge:"focus"});return}if(tv.isMoveBackward(r)){e.preventDefault(),n&&v.e6.isCollapsed(n)?v.YR.move(W,{reverse:!o}):v.YR.collapse(W,{edge:o?"end":"start"});return}if(tv.isMoveForward(r)){e.preventDefault(),n&&v.e6.isCollapsed(n)?v.YR.move(W,{reverse:o}):v.YR.collapse(W,{edge:o?"start":"end"});return}if(tv.isMoveWordBackward(r)){e.preventDefault(),n&&v.e6.isExpanded(n)&&v.YR.collapse(W,{edge:"focus"}),v.YR.move(W,{unit:"word",reverse:!o});return}if(tv.isMoveWordForward(r)){e.preventDefault(),n&&v.e6.isExpanded(n)&&v.YR.collapse(W,{edge:"focus"}),v.YR.move(W,{unit:"word",reverse:o});return}if(j){if((S||L)&&n&&(tv.isDeleteBackward(r)||tv.isDeleteForward(r))&&v.e6.isCollapsed(n)){var l=v.NB.parent(W,n.anchor.path);if(v.W_.isElement(l)&&v.ML.isVoid(W,l)&&(v.ML.isInline(W,l)||v.ML.isBlock(W,l))){e.preventDefault(),v.ML.deleteBackward(W,{unit:"block"});return}}}else{if(tv.isBold(r)||tv.isItalic(r)||tv.isTransposeCharacter(r)){e.preventDefault();return}if(tv.isSoftBreak(r)){e.preventDefault(),v.ML.insertSoftBreak(W);return}if(tv.isSplitBlock(r)){e.preventDefault(),v.ML.insertBreak(W);return}if(tv.isDeleteBackward(r)){e.preventDefault(),n&&v.e6.isExpanded(n)?v.ML.deleteFragment(W,{direction:"backward"}):v.ML.deleteBackward(W);return}if(tv.isDeleteForward(r)){e.preventDefault(),n&&v.e6.isExpanded(n)?v.ML.deleteFragment(W,{direction:"forward"}):v.ML.deleteForward(W);return}if(tv.isDeleteLineBackward(r)){e.preventDefault(),n&&v.e6.isExpanded(n)?v.ML.deleteFragment(W,{direction:"backward"}):v.ML.deleteBackward(W,{unit:"line"});return}if(tv.isDeleteLineForward(r)){e.preventDefault(),n&&v.e6.isExpanded(n)?v.ML.deleteFragment(W,{direction:"forward"}):v.ML.deleteForward(W,{unit:"line"});return}if(tv.isDeleteWordBackward(r)){e.preventDefault(),n&&v.e6.isExpanded(n)?v.ML.deleteFragment(W,{direction:"backward"}):v.ML.deleteBackward(W,{unit:"word"});return}if(tv.isDeleteWordForward(r)){e.preventDefault(),n&&v.e6.isExpanded(n)?v.ML.deleteFragment(W,{direction:"forward"}):v.ML.deleteForward(W,{unit:"word"});return}}}}},[g,W,B.onKeyDown]),onPaste:(0,u.useCallback)(e=>{!g&&eC.hasEditableTarget(W,e.target)&&!tL(e,B.onPaste)&&(!j||ev(e.nativeEvent)||L)&&(e.preventDefault(),eC.insertData(W,e.clipboardData))},[g,W,B.onPaste])}),u.createElement(tk,{decorations:em,node:W,renderElement:w,renderPlaceholder:y,renderLeaf:b,selection:W.selection})))))}),tE=e=>{var{attributes:t,children:r}=e;return u.createElement("span",tM({},t),r,O&&u.createElement("br",null))},tO=()=>[],tC=(e,t)=>{if(t.getBoundingClientRect&&(!e.selection||e.selection&&v.e6.isCollapsed(e.selection))){var r=t.startContainer.parentElement;r.getBoundingClientRect=t.getBoundingClientRect.bind(t),(0,f.Z)(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},tL=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.isDefaultPrevented()||e.isPropagationStopped()},tD=e=>ec(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),tS=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.defaultPrevented},tP=(0,u.createContext)(!1),tB=(0,u.createContext)({}),tF=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],tR=e=>{var t,r,n,{editor:a,children:o,onChange:i,onSelectionChange:l,onValueChange:s,initialValue:d}=e,c=m(e,tF),[f,h]=u.useState(()=>{if(!v.NB.isNodeList(d))throw Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(v.o4.stringify(d)));if(!v.ML.isEditor(a))throw Error("[Slate] editor is invalid! You passed: ".concat(v.o4.stringify(a)));return a.children=d,Object.assign(a,c),{v:0,editor:a}}),{selectorContext:p,onChange:g}=(t=(0,u.useRef)([]).current,r=(0,u.useRef)({editor:a}).current,n=(0,u.useCallback)(e=>{r.editor=e,t.forEach(t=>t(e))},[t,r]),{selectorContext:(0,u.useMemo)(()=>({getSlate:()=>r.editor,addEventListener:e=>(t.push(e),()=>{t.splice(t.indexOf(e),1)})}),[t,r]),onChange:n}),w=(0,u.useCallback)(e=>{var t;(i&&i(a.children),(null==e||null===(t=e.operation)||void 0===t?void 0:t.type)==="set_selection")?null==l||l(a.selection):null==s||s(a.children),h(e=>({v:e.v+1,editor:a})),g(a)},[a,g,i,l,s]);(0,u.useEffect)(()=>(J.set(a,w),()=>{J.set(a,()=>{})}),[a,w]);var[b,M]=(0,u.useState)(eC.isFocused(a));return(0,u.useEffect)(()=>{M(eC.isFocused(a))},[a]),eW(()=>{var e=()=>M(eC.isFocused(a));return k>=17?(document.addEventListener("focusin",e),document.addEventListener("focusout",e),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",e)}):(document.addEventListener("focus",e,!0),document.addEventListener("blur",e,!0),()=>{document.removeEventListener("focus",e,!0),document.removeEventListener("blur",e,!0)})},[]),u.createElement(tB.Provider,{value:p},u.createElement(tl.Provider,{value:f},u.createElement(y.Provider,{value:f.editor},u.createElement(tP.Provider,{value:b},o))))},tT=(e,t)=>{var r=(t.top+t.bottom)/2;return e.top<=r&&e.bottom>=r},tN=(e,t,r)=>{var n=eC.toDOMRange(e,t).getBoundingClientRect(),a=eC.toDOMRange(e,r).getBoundingClientRect();return tT(n,a)&&tT(a,n)},tj=(e,t)=>{var r=v.ML.range(e,v.e6.end(t)),n=Array.from(v.ML.positions(e,{at:t})),a=0,o=n.length,i=Math.floor(o/2);if(tN(e,v.ML.range(e,n[a]),r))return v.ML.range(e,n[a],r);if(n.length<2)return v.ML.range(e,n[n.length-1],r);for(;i!==n.length&&i!==a;)tN(e,v.ML.range(e,n[i]),r)?o=i:a=i,i=Math.floor((a+o)/2);return v.ML.range(e,n[o],r)};function tW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tW(Object(r),!0).forEach(function(t){b(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tW(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var tI=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x-slate-fragment",{apply:r,onChange:n,deleteBackward:a,addMark:o,removeMark:i}=e;return z.set(e,new WeakMap),e.addMark=(t,r)=>{var n,a;null===(n=Z.get(e))||void 0===n||n(),!G.get(e)&&null!==(a=ee.get(e))&&void 0!==a&&a.length&&G.set(e,null),Q.delete(e),o(t,r)},e.removeMark=t=>{var r;!G.get(e)&&null!==(r=ee.get(e))&&void 0!==r&&r.length&&G.set(e,null),Q.delete(e),i(t)},e.deleteBackward=t=>{if("line"!==t)return a(t);if(e.selection&&v.e6.isCollapsed(e.selection)){var r=v.ML.above(e,{match:t=>v.W_.isElement(t)&&v.ML.isBlock(e,t),at:e.selection});if(r){var[,n]=r,o=v.ML.range(e,n,e.selection.anchor),i=tj(e,o);v.e6.isCollapsed(i)||v.YR.delete(e,{at:i})}}},e.apply=t=>{var n=[],a=[],o=ee.get(e);if(null!=o&&o.length){var i=o.map(e=>(function(e,t){var{path:r,diff:n,id:a}=e;switch(t.type){case"insert_text":if(!v.y$.equals(t.path,r)||t.offset>=n.end)return e;if(t.offset<=n.start)return{diff:{start:t.text.length+n.start,end:t.text.length+n.end,text:n.text},id:a,path:r};return{diff:{start:n.start,end:n.end+t.text.length,text:n.text},id:a,path:r};case"remove_text":if(!v.y$.equals(t.path,r)||t.offset>=n.end)return e;if(t.offset+t.text.length<=n.start)return{diff:{start:n.start-t.text.length,end:n.end-t.text.length,text:n.text},id:a,path:r};return{diff:{start:n.start,end:n.end-t.text.length,text:n.text},id:a,path:r};case"split_node":if(!v.y$.equals(t.path,r)||t.position>=n.end)return{diff:n,id:a,path:v.y$.transform(r,t,{affinity:"backward"})};if(t.position>n.start)return{diff:{start:n.start,end:Math.min(t.position,n.end),text:n.text},id:a,path:r};return{diff:{start:n.start-t.position,end:n.end-t.position,text:n.text},id:a,path:v.y$.transform(r,t,{affinity:"forward"})};case"merge_node":if(!v.y$.equals(t.path,r))return{diff:n,id:a,path:v.y$.transform(r,t)};return{diff:{start:n.start+t.position,end:n.end+t.position,text:n.text},id:a,path:v.y$.transform(r,t)}}var o=v.y$.transform(r,t);return o?{diff:n,path:o,id:a}:null})(e,t)).filter(Boolean);ee.set(e,i)}var l=er.get(e);l&&er.set(e,eF(e,l,t));var s=et.get(e);if(null!=s&&s.at){var d=v.E9.isPoint(null==s?void 0:s.at)?eB(e,s.at,t):eF(e,s.at,t);et.set(e,d?tA(tA({},s),{},{at:d}):null)}switch(t.type){case"insert_text":case"remove_text":case"set_node":case"split_node":n.push(...tq(e,t.path));break;case"set_selection":null===(c=X.get(e))||void 0===c||c.unref(),X.delete(e);break;case"insert_node":case"remove_node":n.push(...tq(e,v.y$.parent(t.path)));break;case"merge_node":n.push(...tq(e,v.y$.previous(t.path)));break;case"move_node":n.push(...tq(e,v.y$.common(v.y$.parent(t.path),v.y$.parent(t.newPath)))),v.y$.isBefore(t.path,t.newPath)?(n.push(...tq(e,v.y$.parent(t.path))),u=t.newPath):(n.push(...tq(e,v.y$.parent(t.newPath))),u=t.path);var c,u,f=v.NB.get(e,v.y$.parent(u)),h=eC.findKey(e,f);a.push([v.ML.pathRef(e,v.y$.parent(u)),h])}for(var[p,g]of(r(t),n)){var[m]=v.ML.node(e,p);U.set(m,g)}for(var[w,b]of a)if(w.current){var[y]=v.ML.node(e,w.current);U.set(y,b)}},e.setFragmentData=r=>{var{selection:n}=e;if(n){var[a,o]=v.e6.edges(n),i=v.ML.void(e,{at:a.path}),l=v.ML.void(e,{at:o.path});if(!v.e6.isCollapsed(n)||i){var s=eC.toDOMRange(e,n),d=s.cloneContents(),c=d.childNodes[0];if(d.childNodes.forEach(e=>{e.textContent&&""!==e.textContent.trim()&&(c=e)}),l){var[u]=l,f=s.cloneRange(),h=eC.toDOMNode(e,u);f.setEndAfter(h),d=f.cloneContents()}if(i&&(c=d.querySelector("[data-slate-spacer]")),Array.from(d.querySelectorAll("[data-slate-zero-width]")).forEach(e=>{var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""}),ef(c)){var p=c.ownerDocument.createElement("span");p.style.whiteSpace="pre",p.appendChild(c),d.appendChild(p),c=p}var g=JSON.stringify(e.getFragment()),m=window.btoa(encodeURIComponent(g));c.setAttribute("data-slate-fragment",m),r.setData("application/".concat(t),m);var w=d.ownerDocument.createElement("div");return w.appendChild(d),w.setAttribute("hidden","true"),d.ownerDocument.body.appendChild(w),r.setData("text/html",w.innerHTML),r.setData("text/plain",ew(w)),d.ownerDocument.body.removeChild(w),r}}},e.insertData=t=>{e.insertFragmentData(t)||e.insertTextData(t)},e.insertFragmentData=r=>{var n=r.getData("application/".concat(t))||ey(r);if(n){var a=JSON.parse(decodeURIComponent(window.atob(n)));return e.insertFragment(a),!0}return!1},e.insertTextData=t=>{var r=t.getData("text/plain");if(r){var n=r.split(/\r\n|\r|\n/),a=!1;for(var o of n)a&&v.YR.splitNodes(e,{always:!0}),e.insertText(o),a=!0;return!0}return!1},e.onChange=t=>{(k<18?g.unstable_batchedUpdates:e=>e())(()=>{var r=J.get(e);r&&r(t),n(t)})},e},tq=(e,t)=>{var r=[];for(var[n,a]of v.ML.levels(e,{at:t})){var o=eC.findKey(e,n);r.push([a,o])}return r}}}]);